<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
    <link rel="stylesheet" href="GreenCode-contactus.css">
</head>
<body>
<!-- Brukerinfo-seksjon - lim inn rett etter <body>-taggen i hver HTML-fil -->
    <div class="navbar-top">
        <h1 class="logo">GreenCode</h1>
        <div id="user-info">
            <span id="user-name"></span>
            <span id="badge-container">Laster badges...</span>
            <a id="auth-btn" class="login-btn" href="#">Logg inn</a>
        </div>
    </div>
    <div class="navbar">
        <a href="index.html">Home</a>
        <div class="dropdown">
            <button class="dropbtn">Articles</button>
            <div class="dropdown-content">
                <a href="GreenCode-user-case-studies.html">User Case Studies</a>
                <a href="GreenCode-guides.html">Guides</a>
                <a href="GreenCode-checklist.html">Checklist</a>
                <a href="GreenCode-tutorials.html">Tutorials</a>
            </div>
        </div>
        <a href="GreenCode-carbonfootprint.html">Carbonfootprint</a>
        <a href="#">Forum</a>
        <div class="dropdown">
            <button class="dropbtn">Contact</button>
            <div class="dropdown-content">
                <a href="GreenCode-contactus.html">Contact Us</a>
                <a href="GreenCode-about-us.html">About Us</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Badges & Challenges</button>
            <div class="dropdown-content">
                <a href="Code-Badges & Challenges.html">Badges</a>
                <a href="challenges.html">Challenges</a>
            </div>
        </div>
    </div>

    <main>
        <div class="container">
            <div class="sidebar">
                <h3>Address Details</h3>
                <p>&#127968; Gullbring 47, 3802, Bø</p>
                <p>&#9742; (+47) 445 76 234</p>
                <p>&#128231; greencode@gmail.com</p>
            </div>
            <div class="contact-form">
                <h3>Contact Us</h3>
                <form action="#" method="post">
                    <input type="text" name="firstname" placeholder="First name" required>
                    <input type="text" name="lastname" placeholder="Last name" required>
                    <input type="email" name="email" placeholder="Example@email.com" required>
                    <textarea name="message" placeholder="Write here..." rows="5" required></textarea>
                    <button type="submit">Send</button>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 GreenCode. All rights reserved.</p>
        <a href="GreenCode-guides.html">Guides</a>
        <a href="GreenCode-contactus.html">Contact Us</a>
    </footer>
    <!-- Firebase-integrasjon - lim inn rett før </body>-taggen i hver HTML-fil -->
<script type="module">
    // Firebase importer
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
    import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCDtb0s8if31AXSdoIao_N4sIODaeVPM98",
        authDomain: "greencode-project-49744.firebaseapp.com",
        projectId: "greencode-project-49744",
        storageBucket: "greencode-project-49744.appspot.com",
        messagingSenderId: "728982263717",
        appId: "1:728982263717:web:dcd1f096d04cb52909fa4c",
        measurementId: "G-8FZXZ885MN"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    let authBtn = document.getElementById("auth-btn");
    const badgeContainer = document.getElementById("badge-container");
    const userName = document.getElementById("user-name");

    onAuthStateChanged(auth, async (user) => {
        if (user) {
            const name = user.displayName || "Bruker";
            userName.textContent = `Hei, ${name}!`;

            authBtn.textContent = "Logg ut";
            authBtn.href = "#";
            
            // Fjern eventuelle tidligere event listeners før vi legger til ny
            const newAuthBtn = authBtn.cloneNode(true);
            authBtn.parentNode.replaceChild(newAuthBtn, authBtn);
            authBtn = newAuthBtn;
            
            authBtn.addEventListener("click", (e) => {
                e.preventDefault();
                signOut(auth);
            });

            try {
                // Hent badges fra collection
                const badgesRef = collection(db, "badges");
                const querySnapshot = await getDocs(badgesRef);
                
                badgeContainer.innerHTML = "";  // Tøm badge-containeren før vi viser nye badges
                
                if (querySnapshot.empty) {
                    badgeContainer.textContent = "Ingen badges funnet";
                } else {
                    querySnapshot.forEach((doc) => {
                        const badge = doc.data();
                        if (badge && badge.Ikon) {
                            // Opprett kun bildeelementet uten tekst
                            const img = document.createElement("img");
                            img.src = badge.Ikon;
                            img.alt = badge.Navn || 'Badge';
                            img.title = badge.Beskrivelse || ''; // Viser beskrivelsen som tooltip ved hover
                            img.style.width = "40px";
                            img.style.height = "40px";
                            img.style.marginLeft = "5px";
                            
                            // Legg til bildet direkte i container
                            badgeContainer.appendChild(img);
                        }
                    });
                }
            } catch (error) {
                console.error("Feil ved henting av badges:", error);
                badgeContainer.textContent = "Kunne ikke laste badges";
            }
        } else {
            userName.textContent = "";
            badgeContainer.textContent = "";
            authBtn.textContent = "Logg inn";
            authBtn.href = "login.html";
        }
    });
</script>
</body>
</html>
